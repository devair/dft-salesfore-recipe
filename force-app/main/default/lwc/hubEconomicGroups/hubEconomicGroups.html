<template>
    <lightning-card title="Grupos EconÃ´micos" icon-name="standard:account" variant="base">        
        <template lwc:if={isMobile}>
            <div class="fixed-header  slds-p-bottom_x-small">
                <c-search-field value={searchTerm} items={seachItens} placeholder="Digite o nome do cliente"
                    onchange={handleSearchChange} onselect={handleSearchChange}>
                </c-search-field>
            </div>
            <template for:each={treeData} for:item="account">
                <div key={account.id} class="slds-p-bottom_x-small">
                    <lightning-accordion allow-multiple-sections-open class="custom-accordion-section"
                        active-section-name={activeSections}>
                        <div class="slds-box slds-box_xx-small">
                            <lightning-accordion-section name={account.id} label={account.name}
                                class="accordion_section">
                                <lightning-button-icon icon-name="standard:client" alternative-text="One Page"
                                    title="One Page" class="slds-button_icon-large" value={account.parentId}
                                    onclick={handleOnePage} variant="border-filled" data-record-id={account.parentId}
                                    data-field-name="onePage" data-field-value={account.parentId} slot="actions">
                                </lightning-button-icon>

                                <c-account-view account={account}></c-account-view>
                            </lightning-accordion-section>
                        </div>
                    </lightning-accordion>
                </div>
            </template>
        </template>
        <template lwc:else>
            <lightning-button-group slot="actions">
                <c-search-field value={searchTerm} items={seachItens} placeholder="Digite o nome do cliente"
                    onchange={handleSearchChange} onselect={handleSearchChange}>
                </c-search-field>
            </lightning-button-group>
            <div class="slds-p-around_small">
                <template lwc:if={mainRecords}>
                    <c-data-grid main-records={mainRecords} onnavigate={navigateToPage}></c-data-grid>
                </template>
            </div>
        </template>
    </lightning-card>
</template>